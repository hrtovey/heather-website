<template>
    <div class="content__wrapper pillar-post">
        <header class="content__header">
            <h1 class="h2">{{ $page.post.title }}</h1>
            <div class="content__meta">
                <p class="content__meta-item">{{ $page.post.timeToRead }} min read</p>
                <p v-if="$page.post.lastModified" class="content__meta-item">{{ $page.post.lastModified }}</p>
                <p v-else class="content__meta-item">{{ $page.post.date }}</p>
                <p class="content__meta-item">
                    <g-link v-for="category in $page.post.categories" :key="category.title" :to="createTitleLink(category.title)" class="content__category-title">{{ formatCategory(category.title) }}</g-link>
                </p>
            </div>
        </header>
        <section class="table-of-contents">
            <div class="toc-list grid align-stretch" v-html="formatToC($page.post.content)">
            </div>
        </section>
        <article class="content__main" v-html="$page.post.content"></article>
        <section class="content__newsletter">
            <div class="grid align-vertically">
                <div class="grid__item medium--9">
                    <h2>Thanks for reading!</h2>
                    <p>Hello! I'm Heather Tovey, a Front-End Developer specializing in Shopify.</p>
                    <p>I created this website to share useful resources for web designers and developers. If you found this article helpful, consider <a href="https://www.subscribepage.com/shopify-coding">subscribing to my newsletter</a> or <a href="https://ko-fi.com/heathertovey">buying me a coffee</a>.</p>
                </div>
                <div class="grid__item medium--3">
                    <svg width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
                        <g>
                            <path d="M7.479,66.531C10.918,65.908 19.856,64.844 30.624,64.141C42.622,63.358 56.918,63.018 68.473,64.225C80.271,65.458 89.267,68.351 90.316,74.103C90.36,74.345 90.39,74.585 90.406,74.823C90.659,78.704 87.806,80.873 83.309,81.944C83.284,81.951 83.259,81.957 83.234,81.961C81.631,82.337 79.823,82.575 77.874,82.702C68.096,83.34 54.67,81.218 46.566,79.922C45.793,80.602 45.372,81.357 45.249,82.032C45.198,82.308 45.198,82.566 45.245,82.796C45.287,83.003 45.368,83.185 45.484,83.331C45.608,83.487 45.776,83.605 45.985,83.673L46.639,83.826C49.772,84.519 53.496,84.764 56.146,84.903C56.687,84.932 58.083,85.095 59.299,85.718C59.912,86.032 60.482,86.461 60.894,87.045C61.318,87.647 61.569,88.397 61.52,89.331C61.48,90.093 61.235,90.978 60.711,92.005C60.7,92.028 60.688,92.052 60.676,92.075C60.363,92.671 59.782,93.287 59.002,93.878C56.326,95.909 51.057,97.838 46.532,97.578C46.228,97.574 45.957,97.36 45.891,97.051C45.815,96.691 46.044,96.338 46.404,96.262C48.364,95.841 50.094,95.317 51.602,94.469C53.085,93.635 54.366,92.477 55.463,90.776C55.661,90.467 56.073,90.377 56.382,90.576C56.692,90.774 56.781,91.186 56.583,91.495C55.408,93.317 54.038,94.584 52.459,95.511C54.758,94.855 56.841,93.852 58.2,92.821C58.827,92.346 59.279,91.88 59.499,91.461C59.64,91.19 59.663,90.957 59.535,90.788C59.218,90.367 58.311,90.047 56.632,89.911C56.158,89.873 55.561,89.843 54.84,89.807C52.544,89.693 49.05,89.518 45.824,88.973C41.058,88.167 36.867,86.528 37.458,83.037C37.691,81.659 38.414,80.11 39.694,79.113C40.043,78.841 40.431,78.61 40.86,78.434C41.08,78.329 41.338,78.243 41.639,78.184C41.655,78.181 41.69,78.175 41.745,78.166C42.149,78.084 42.582,78.047 43.044,78.064C47.734,78.085 58.548,77.656 67.875,77.078C75.449,76.609 82.005,76.049 83.396,75.566C83.679,75.467 83.877,75.341 83.998,75.2C84.079,75.104 84.12,75.003 84.121,74.904C84.122,74.786 84.075,74.655 83.98,74.52C83.83,74.305 83.572,74.098 83.211,73.925C82.587,73.707 81.908,73.527 81.186,73.392C70.587,71.421 60.174,70.956 48.81,71.64C37.419,72.325 25.077,74.163 10.645,76.795C10.524,76.816 10.405,76.804 10.297,76.764L10.179,76.706L10.165,76.697C10.017,76.601 9.908,76.446 9.874,76.258C9.853,76.137 9.865,76.018 9.905,75.91L9.963,75.792L10.043,75.687L14.148,71.11L7.271,67.79C6.94,67.63 6.801,67.233 6.961,66.902C7.063,66.69 7.262,66.557 7.479,66.531ZM45.892,85.017C45.793,84.998 45.698,84.974 45.606,84.946C42.637,84.196 40.251,82.985 39.707,80.998C39.205,81.685 38.898,82.5 38.77,83.255C38.356,85.707 41.964,86.971 46.043,87.66C49.203,88.195 52.642,88.366 54.902,88.479C55.683,88.518 56.329,88.55 56.736,88.583C58.392,88.717 59.503,89.067 60.163,89.56C60.177,89.458 60.187,89.359 60.192,89.263C60.223,88.659 60.068,88.184 59.805,87.81C59.53,87.42 59.131,87.124 58.695,86.9C57.699,86.39 56.532,86.255 56.078,86.231C53.384,86.09 49.592,85.839 46.352,85.123L45.892,85.017ZM44.969,79.667C44.459,79.585 43.994,79.512 43.597,79.45C43.388,79.418 43.187,79.399 42.993,79.392C42.907,79.392 42.823,79.391 42.741,79.391C42.255,79.401 41.818,79.49 41.427,79.641C41.217,79.744 41.097,79.873 41.031,80.001C40.931,80.198 40.94,80.4 40.956,80.499C40.96,80.524 40.954,80.482 40.96,80.512C41.176,81.61 42.323,82.429 43.94,83.046C43.863,82.658 43.861,82.235 43.941,81.798C44.068,81.103 44.402,80.363 44.969,79.667ZM50.744,79.235C58.757,80.47 69.603,81.908 77.79,81.374C79.668,81.251 81.402,81.026 82.918,80.671L82.924,80.669C84.942,80.042 86.165,79.28 86.752,78.485C87.08,78.042 87.193,77.591 87.125,77.156C87.052,76.688 86.774,76.211 86.33,75.754C86.081,75.498 85.784,75.253 85.445,75.021C85.419,75.396 85.275,75.753 85.008,76.065C84.741,76.378 84.35,76.641 83.833,76.821C82.314,77.349 75.628,77.931 67.953,78.406C62.197,78.763 55.864,79.063 50.744,79.235ZM83.66,72.677C83.681,72.684 83.702,72.691 83.723,72.7C85.228,73.239 86.462,73.983 87.283,74.827C87.917,75.479 88.32,76.2 88.437,76.952C88.467,77.139 88.478,77.326 88.472,77.513C88.927,76.773 89.143,75.909 89.078,74.907C89.065,74.707 89.042,74.517 89.009,74.338C88.093,69.317 79.562,66.721 68.338,65.548C56.871,64.35 42.651,64.689 30.707,65.469C21.699,66.057 14.001,66.894 9.754,67.512L15.522,70.296C15.853,70.456 15.992,70.854 15.832,71.184C15.798,71.255 15.753,71.317 15.7,71.369L12.315,75.143C25.991,72.685 37.796,70.97 48.731,70.312C60.197,69.622 70.712,70.092 81.426,72.085C82.218,72.232 82.968,72.433 83.66,72.677Z"/>
                            <path d="M42.277,39.042L45.665,43.77L51.426,42.959C51.79,42.908 52.125,43.163 52.176,43.526C52.2,43.705 52.152,43.876 52.053,44.011L48.603,48.694L51.155,53.923C51.316,54.253 51.179,54.652 50.848,54.813C50.667,54.902 50.465,54.9 50.293,54.826L44.827,53.01L40.642,57.054C40.378,57.309 39.957,57.301 39.702,57.036C39.569,56.898 39.508,56.717 39.518,56.539L39.556,50.756L34.418,48.026C34.092,47.854 33.969,47.45 34.141,47.125C34.236,46.947 34.401,46.829 34.584,46.788L40.071,45.045L41.079,39.315C41.143,38.953 41.488,38.71 41.85,38.773C42.029,38.805 42.179,38.905 42.277,39.042ZM44.816,44.873L42.117,41.106L41.314,45.67L41.312,45.669C41.27,45.905 41.102,46.111 40.858,46.188L36.439,47.591L40.535,49.767L40.534,49.769C40.745,49.881 40.888,50.103 40.887,50.358L40.856,54.999L44.193,51.774L44.194,51.775C44.366,51.61 44.621,51.543 44.862,51.623L49.264,53.085L47.229,48.917L47.23,48.916C47.125,48.702 47.14,48.438 47.291,48.232L50.043,44.497L45.492,45.138C45.242,45.189 44.974,45.094 44.816,44.873Z" style="fill:rgb(255,199,63);"/>
                            <path d="M76.511,49.056C77.439,49.462 78.071,50.295 78.345,51.322C78.604,52.293 78.541,53.446 78.095,54.559C78.083,54.597 78.068,54.633 78.049,54.668C77.581,55.772 76.812,56.635 75.943,57.141C75.024,57.676 73.989,57.821 73.046,57.455C73.005,57.442 72.965,57.426 72.928,57.406C72,57 71.368,56.167 71.094,55.14C70.834,54.169 70.898,53.016 71.344,51.903C71.356,51.865 71.371,51.828 71.389,51.793C71.858,50.69 72.626,49.827 73.496,49.321C74.414,48.786 75.45,48.641 76.393,49.007L76.511,49.056ZM77.059,51.666C76.883,51.008 76.498,50.487 75.946,50.259L75.946,50.259C75.392,50.031 74.751,50.129 74.162,50.472C73.52,50.846 72.946,51.503 72.596,52.354L72.595,52.354C72.244,53.205 72.188,54.076 72.38,54.796C72.556,55.454 72.94,55.975 73.492,56.202L73.493,56.202C74.046,56.431 74.687,56.333 75.276,55.99C75.919,55.616 76.492,54.959 76.843,54.109L76.843,54.108C77.194,53.257 77.251,52.386 77.059,51.666ZM78.651,47.617L76.402,46.267C76.147,46.114 76.018,45.802 76.108,45.505L84.303,18.608C84.517,17.906 84.981,17.349 85.569,17.009C86.159,16.667 86.874,16.542 87.586,16.706L93.451,18.055C93.9,18.159 94.297,18.356 94.629,18.636C94.96,18.915 95.221,19.273 95.397,19.698C95.574,20.124 95.645,20.56 95.61,20.99C95.575,21.422 95.435,21.844 95.191,22.235L79.557,47.398L79.556,47.398C79.365,47.705 78.963,47.803 78.651,47.617ZM77.53,45.394L78.772,46.14L94.061,21.532C94.19,21.325 94.264,21.106 94.282,20.886C94.3,20.663 94.262,20.434 94.168,20.209C94.074,19.982 93.939,19.794 93.769,19.652C93.6,19.509 93.393,19.407 93.155,19.352L87.289,18.003C86.916,17.917 86.543,17.982 86.236,18.16C85.928,18.338 85.685,18.629 85.574,18.993L77.53,45.394Z"/>
                            <path d="M20.847,39.225C21.121,38.198 21.754,37.364 22.681,36.958C22.719,36.938 22.758,36.922 22.8,36.91C23.743,36.543 24.778,36.689 25.697,37.224C26.566,37.73 27.334,38.593 27.803,39.696C27.821,39.731 27.836,39.768 27.848,39.806C28.294,40.919 28.358,42.072 28.099,43.042C27.824,44.07 27.192,44.903 26.264,45.309C26.227,45.329 26.187,45.345 26.146,45.358C25.203,45.724 24.168,45.579 23.249,45.044C22.38,44.538 21.611,43.675 21.143,42.571C21.125,42.536 21.109,42.499 21.098,42.461C20.652,41.349 20.588,40.195 20.847,39.225ZM23.246,38.162C22.694,38.39 22.309,38.911 22.134,39.569C21.941,40.289 21.998,41.16 22.349,42.011L22.349,42.011C22.7,42.862 23.273,43.518 23.916,43.893C24.505,44.236 25.146,44.334 25.7,44.105L25.7,44.105C26.252,43.877 26.636,43.356 26.812,42.699C27.004,41.978 26.948,41.108 26.597,40.257L26.597,40.256C26.246,39.406 25.673,38.749 25.03,38.375C24.441,38.032 23.8,37.934 23.246,38.162L23.246,38.162ZM22.79,34.17L20.541,35.52C20.226,35.708 19.818,35.605 19.63,35.29C19.622,35.278 19.616,35.266 19.609,35.253L4.741,9.446C4.508,9.042 4.382,8.611 4.364,8.172C4.346,7.733 4.436,7.293 4.635,6.872C4.834,6.45 5.117,6.1 5.467,5.835C5.816,5.57 6.229,5.393 6.69,5.315L11.735,4.467C12.426,4.351 13.103,4.498 13.66,4.843C14.217,5.187 14.651,5.729 14.856,6.401L23.084,33.407C23.175,33.705 23.045,34.017 22.79,34.17L22.79,34.17ZM20.438,34.032L21.662,33.297L13.585,6.786C13.478,6.435 13.252,6.152 12.962,5.973C12.673,5.794 12.318,5.718 11.954,5.779L6.909,6.628C6.665,6.669 6.449,6.761 6.269,6.897C6.09,7.033 5.944,7.216 5.838,7.44C5.732,7.665 5.683,7.896 5.692,8.12C5.702,8.345 5.768,8.57 5.892,8.785L20.438,34.032Z"/>
                            <path d="M51.279,30.634C51.148,30.446 51.194,30.187 51.382,30.056C51.569,29.925 51.828,29.971 51.959,30.158L56.209,36.229C56.34,36.417 56.294,36.675 56.106,36.807C55.918,36.938 55.66,36.892 55.528,36.704L51.279,30.634ZM52.493,25.17C52.362,24.983 52.408,24.724 52.596,24.593C52.784,24.461 53.042,24.507 53.173,24.695L57.423,30.765C57.554,30.953 57.508,31.212 57.32,31.343C57.132,31.475 56.874,31.429 56.742,31.241L52.493,25.17Z"/>
                            <path d="M69.797,13.794L70.133,19.684L75.196,22.713C75.511,22.902 75.614,23.31 75.426,23.625C75.308,23.821 75.104,23.935 74.892,23.947L74.892,23.948L69.001,24.283L65.972,29.347C65.784,29.662 65.376,29.764 65.061,29.576C64.864,29.458 64.75,29.255 64.738,29.042L64.738,29.042L64.402,23.152L59.339,20.122C59.024,19.934 58.921,19.526 59.11,19.211C59.227,19.014 59.431,18.9 59.643,18.888L59.643,18.888L65.534,18.552L68.563,13.489C68.751,13.174 69.16,13.071 69.474,13.26C69.671,13.377 69.785,13.581 69.797,13.794L69.797,13.794ZM68.825,20.11L68.592,16.029L66.507,19.514C66.4,19.71 66.198,19.847 65.959,19.86L61.878,20.093L65.364,22.178C65.559,22.285 65.697,22.487 65.71,22.726L65.943,26.807L68.028,23.321C68.135,23.126 68.337,22.988 68.576,22.975L72.657,22.743L69.171,20.657C68.976,20.551 68.838,20.348 68.825,20.11Z" style="fill:rgb(255,199,63);"/>
                            <path d="M40.693,6.035C41.807,4.605 43.175,3.544 44.587,2.955C46.289,2.245 48.061,2.211 49.566,3.021C50.632,3.595 51.418,4.287 51.964,5.067C53.104,6.697 53.168,8.644 52.534,10.661C51.93,12.578 50.686,14.562 49.149,16.375C46.709,19.251 43.503,21.724 40.953,22.808C40.78,22.882 40.593,22.876 40.432,22.808L40.429,22.807C37.88,21.721 34.675,19.249 32.236,16.375C30.699,14.562 29.455,12.578 28.851,10.661C28.217,8.644 28.281,6.697 29.421,5.067C29.967,4.287 30.753,3.595 31.819,3.021C33.324,2.211 35.096,2.245 36.798,2.955C38.211,3.544 39.578,4.605 40.693,6.035ZM45.097,4.184C43.68,4.775 42.304,5.939 41.256,7.534C41.206,7.613 41.14,7.682 41.057,7.736C40.749,7.937 40.337,7.851 40.135,7.543C39.086,5.943 37.707,4.776 36.288,4.184C34.948,3.625 33.58,3.585 32.45,4.193C31.571,4.666 30.937,5.218 30.51,5.828C29.637,7.075 29.607,8.626 30.122,10.265C30.669,12.002 31.821,13.828 33.252,15.515C35.48,18.142 38.359,20.404 40.693,21.469C43.026,20.404 45.905,18.142 48.133,15.515C49.564,13.828 50.716,12.002 51.263,10.265C51.779,8.626 51.748,7.075 50.875,5.828C50.448,5.218 49.814,4.666 48.935,4.193C47.805,3.585 46.437,3.625 45.097,4.184Z" style="fill:rgb(254,94,114);"/>
                        </g>
                    </svg>
                </div>
            </div>
        </section>
    </div>
</template>

<script>
export default {
  methods: {
	  formatCategory(category) {
		  return category.replace(/-/g, ' ');
	  },
	  createTitleLink(categoryTitle) {
		  return `/blog/category/${categoryTitle}`;
	  },
      formatToC(content) {
          let frag = document.createRange().createContextualFragment(content);
          let toc = frag.querySelectorAll('h2');
          let sectionContainer = ``;
          toc.forEach((h2, index, array) => {
            let tocItem = `
                <div class="card grid__item medium--6 large--3 toc-list__item">
                    <a class="card__link grid__item toc-link" href="#${h2.id}">
                        <div class="card__info">
                            <div class="toc-item-number" data-link-number="${index}"></div>
                            <div class="toc__info">
                                <p class="card__description">${h2.textContent.split(':')[1] ? h2.textContent.split(':')[0] : index === 0 ? 'Introduction': index === (array.length - 1) ? 'Conclusion' : `Section ${index}`}</p>
                                <p class="card__title">${h2.textContent.split(':')[1] ? h2.textContent.split(':')[1] : h2.textContent.split(':')[0]}</p>
                            </div>
                        </div>
                    </a>
                </div>`;
            sectionContainer += tocItem;
            

          });
          return sectionContainer;
      }
  }
}
</script>

